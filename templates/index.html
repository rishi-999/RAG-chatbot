{% extends 'base.html' %}
{% block head %}
<title>Your Personal AI Advisor</title>
<style>
    .loading-spinner {
        border: 4px solid rgba(255, 255, 255, 0.3);
        border-top: 4px solid white;
        border-radius: 50%;
        width: 20px;
        height: 20px;
        animation: spin 1s linear infinite;
        display: none;
        margin-right: 5px;
        vertical-align: middle;
    }

    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }

    .chat-container {
        position: relative;
    }
</style>
{% endblock %}

{% block body %}

<div class="hero">
    <h1>Personal AI Advisor</h1>
    <p>Your assistant to help you better understand you papers!</p>
</div>

<div class="chat-container">
    <div class="chat-box" id="chat-box">
        {% for message in chat_history %}
            <div class="message {{ message.sender }}">
                <p>{{ message.message }}</p>
            </div>
        {% endfor %}
        <div id="loading-indicator" class="loading-spinner"></div> <!-- Loading spinner -->
    </div>
    <form class="message-input" id="message-form" action="/" method="POST">
        <input type="text" id="query" name="query" placeholder="Write a message..." required>
        <input type="submit" value="Send">
    </form>
</div>

<script src="{{ url_for('static', filename='js/main.js') }}"></script>
{% endblock %}
